<%= set_alert_body_temperature %>
<div id="data-for-ajax" data-base-url="<%= logs_ajax_path %>" data-start-date="<%= @start_date %>" data-days="<%= @days %>">
<div class="table-responsive">
  <table class="logs table text-nowrap table-bordered border-secondary table-sm">
    <thead>
      <tr>
        <% @days.times do |i| %>
          <th rowspan="2"></th>
          <th colspan="6" id="day<%= i %>" class="text-center <%= 'text-primary' if today?(@start_date + i) %>"><%= format_date(@start_date + i)%></br><%= month_diff(@start_date + i) %></br><%= puts_from_birth(@start_date + i) %></th>
        <% end %>
      </tr>
      <tr>
        <% @days.times do %>
          <th scope="col" class="text-center table-warning border-secondary">æ¯ä¹³</th>
          <th scope="col" class="text-center table-success border-secondary">ãƒŸãƒ«ã‚¯</th>
          <th scope="col" class="text-center table-info border-secondary">å°¿</th>
          <th scope="col" class="text-center table-primary border-secondary">ä¾¿</th>
          <th scope="col" class="text-center table-danger border-secondary">ä½“æ¸©</th>
          <th scope="col" class="text-center table-secondary border-secondary">å‚™è€ƒ</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% 24.times do |hour| %>
        <tr>
          <% @days.times do |day| %>
            <% if hour == 8 || hour == 16 %>
              <th scope="row" class="top-border text-center"><%= hour %></th>
              <% LogsHelper::TABLE_ORDER_AND_BG_COLOR.each_with_index do |t, index| %>
                <td class="fw-bold text-center top-border <%= t[:bg_color_class] %> border-secondary" data-log-ajax="true" data-date="<%= @start_date + day %>" data-hour="<%= hour %>" data-table="<%= t[:table_name] %>" data-type="<%= index %>" id="day<%= day %>_<%= t[:table_name] %>_<%= hour %>"></td>
              <% end %>
            <% else %>
              <th scope="row" class="text-center"><%= hour %></th>
              <% LogsHelper::TABLE_ORDER_AND_BG_COLOR.each_with_index do |t, index| %>
                <td class="fw-bold text-center <%= t[:bg_color_class] %> border-secondary" data-log-ajax="true" data-date="<%= @start_date + day %>" data-hour="<%= hour %>" data-table="<%= t[:table_name] %>" data-type="<%= index %>" id="day<%= day %>_<%= t[:table_name] %>_<%= hour %>"></td>
              <% end %>
            <% end %>
          <% end %>
        </tr>
      <% end %>
      <!-- å°è¨ˆè¡Œ -->
      <tr>
        <% @days.times do |day| %>
          <th></th>
          <td class="text-center" colspan="6" id="day_<%= day %>_syoukei"><%= sub_total(day) %></td>
        <% end %>
      </tr>
      <!-- åˆè¨ˆè¡Œ -->
      <tr>
        <% @days.times do |day| %>
          <th></th>
          <td class="text-center" colspan="6" id="day_<%= day %>_goukei"><%= total(day) %></td>
        <% end %>
      </tr>
    </tbody>
  </table>
</div>

<div class="btn-group mr-3" role="group" aria-label="Basic example">
  <%= link_to "ä»Šæ—¥", logs_path(move: 0), class: "btn btn-sm btn-secondary" %>
  <%= link_to "<<", logs_path(move: -@days), class: "btn btn-sm btn-secondary" %>
  <%= link_to ">>", logs_path(move: @days), class: "btn btn-sm btn-secondary" %>
</div>

<div class="btn-group" role="group" aria-label="Basic example" id="view_btn">
  <%= link_to "é€±", logs_path(disp: 7), class: "btn btn-dark btn-sm" %>
  <%= link_to "éå»è¡¨ç¤º", logs_path(display_ago: (@display_ago == 1 ? 0 : 1)), id: "display-ago-toggle", class: "btn btn-outline-primary btn-sm #{@display_ago_toggle_class}", role: "button", 'data-bs-toggle': "button", 'aria-pressed': @display_ago_toggle %>
  <%= link_to "æ—¥", logs_path(disp: 1), class: "btn btn-dark btn-sm" %>
  <%= link_to "3æ—¥", logs_path(disp: 3), class: "btn btn-dark btn-sm" %>
</div>
<%= link_to "å‚™è€ƒä¸€è¦§", description_index_path, class: "btn btn-sm btn-dark" %>
<%= link_to "é€£çµ¡å¸³ã‚µãƒãƒ¼ãƒˆ", nursery_support_index_path, class: "btn btn-sm btn-dark", id: "nursery_support_btn" %>
<%= link_to "ä½“æ¸©ã‚°ãƒ©ãƒ•", chart_index_path, class: "mr-3 btn btn-sm btn-primary",id: "chart_btn" %>

<!-- Button trigger modal -->
<div class="logs_fix_area text-center" id="add_log_button">
  <div class="" id='syncing-info'>
    <p class="fs-6 mb-0"><i class="fas fa-sync-alt load"></i><span>&nbsp;åŒæœŸä¸­</span></p>
    <%# <p class="fs-6 mb-0" id="sync-percent">100%</p> %>
  </div>
  <a id="add_log" href="#" class="text-primary text-end" role="button" data-bs-toggle="modal" data-bs-target="#logButtonsModal"><i class="fas fa-edit fa-4x"></i></a>
</div>

<!-- Modal -->
<div class="modal" id="logButtonsModal" tabindex="-1" aria-labelledby="logButtonsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="logButtonsModalLabel"><i class="fas fa-edit"></i> å…¥åŠ›ã—ã¾ã—ã‚‡ã†</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row gx-3">
          <div class="col-sm-6 mb-3">
            <%= link_to ("æ¯ä¹³" + tag.br + last_time(0)).html_safe, new_log_path(type: 0), class: "fw-bold btn w-100 orign-d-flex log-#{btn_class_changer}btn btn-#{btn_class_changer}warning" %>
          </div>
          <div class="col-sm-6 mb-3">
            <%= link_to ("ãƒŸãƒ«ã‚¯" + tag.br + last_time(1)).html_safe, new_log_path(type: 1), class: "fw-bold btn w-100 orign-d-flex log-#{btn_class_changer}btn btn-#{btn_class_changer}success" %>
          </div>
        </div>
        <div class="row gx-3">
          <div class="col-sm-6 mb-3">
            <%= link_to ("å°¿" + tag.br + last_time(2)).html_safe, new_log_path(type: 2), class: "fw-bold btn w-100 orign-d-flex log-#{btn_class_changer}btn btn-#{btn_class_changer}info" %>
          </div>
          <div class="col-sm-6 mb-3">
            <%= link_to ("ä¾¿" + tag.br + last_time(3)).html_safe, new_log_path(type: 3), class: "fw-bold btn w-100 orign-d-flex log-#{btn_class_changer}btn btn-#{btn_class_changer}primary" %>
          </div>
        </div>
        <div class="row gx-3">
          <div class="col-sm-6 mb-3">
            <%= link_to ("ä½“æ¸©" + tag.br + check_body_temperature).html_safe, new_log_path(type: 4), class: "fw-bold btn w-100 orign-d-flex log-#{btn_class_changer}btn btn-#{btn_class_changer}danger" %>
          </div>
          <div class="col-sm-6 mb-3">
            <%= link_to "å‚™è€ƒ", new_log_path(type: 5), class: "fw-bold btn w-100 orign-d-flex log-#{btn_class_changer}btn btn-#{btn_class_changer}secondary" %>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">é–‰ã˜ã‚‹</button>
      </div>
    </div>
  </div>
</div>
<%= javascript_pack_tag 'logs/table_view' %>

<script>
  first_step = {
    title: "ãƒ‡ãƒ¢ã‚’ã”è¦§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ğŸŒˆ",
    content: "BabyAppã¸ã‚ˆã†ã“ã<p>BabyAppã¯å­ã©ã‚‚ã®ãŠä¸–è©±ã®è¨˜éŒ²ã‚’ä»˜ã‘ã‚‹ã‚¢ãƒ—ãƒªã§ã™</p><p>ã“ã®ã‚¢ãƒ—ãƒªã®ã‚³ãƒ€ãƒ¯ãƒªæ©Ÿèƒ½ã¨ä½¿ã„æ–¹ã‚’èª¬æ˜ã—ã¾ã™</p>",
    target: "body",
    order: 1,
  }
  const steps = [
  {
    title: "ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ğŸŒˆ",
    content: "ã“ã®ã‚¢ãƒ—ãƒªã®ã‚³ãƒ€ãƒ¯ãƒªæ©Ÿèƒ½ã¨ä½¿ã„æ–¹ã‚’èª¬æ˜ã—ã¾ã™</p>",
    target: "body",
    order: 1,
  },
  {
    title: "è¨˜éŒ²ã™ã‚‹ğŸ“",
    content: '<%= image_tag 'insert_menu.png', class: 'img-max' %><p>ãŠä¸–è©±ã¯ã“ã“ã‹ã‚‰è¨˜éŒ²ã—ã¾ã™ã€‚âœ¨</p>',
    target: "#add_log_button",
    order: 2,
  },{
    title: "è¨˜éŒ²ãŒä¸€ç›®ç­ç„¶ã§ã™âŒš",
    content: "<p>ä¾¿ã®è¨˜éŒ²ã‚’ä¾‹ã«ã¨ã‚‹ã¨ã€23æ™‚ã®35åˆ†ã€è‰²ã¯ä¾¿è‰²ã‚«ãƒ¼ãƒ‰5ç•ªã§ã€é‡ã¯ğŸ¤ï¼ˆå°‘ã—ï¼‰ã¨ã„ã†æ„å‘³ã«ãªã‚Šã¾ã™ã€‚ğŸ“</p><p>ã¾ãŸã€è¨˜éŒ²éƒ¨åˆ†ã‚’ã‚¿ãƒƒãƒ—ã§ç·¨é›†ãŒå¯èƒ½ã§ã™ã€‚</p>",
    target: "#day2_stool_23",
    order: 3,
    },
  {
    title: "é›†è¨ˆã—ã¾ã™",
    content: "<p>æ¯ä¹³ã¨ãƒŸãƒ«ã‚¯ã¯é›†è¨ˆã—ã¦ã„ã¾ã™ã€‚ä¸€æ—¥ã®ç·é‡ãŒåˆ†ã‹ã£ã¦ä¾¿åˆ©ã§ã™</p>",
    target: "#day_0_syoukei",
    order: 4,
    },
  {
    title: "æœˆé½¢ã€ã™ãã‚ã‹ã‚‹",
    content: "<p>æ›œæ—¥ã‚„æœˆé½¢ãªã©ãŠåŒ»è€…æ§˜ã«ã‹ã‹ã£ãŸã¨ãã«ä¾¿åˆ©ã§ã™</p>",
    target: "#day2",
    order: 5,
    },
    {
      title: "çœ©ã—ãã‚ã‚Šã¾ã›ã‚“ğŸŒ±",
      content: "æ—¥ã®å‡ºæ—¥ã®å…¥ã‚Šã«åˆã‚ã›ã¦ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã¸ã®åˆ‡ã‚Šæ›¿ãˆã‚’è‡ªå‹•ã§è¡Œã„ã¾ã™ã€‚çœ©ã—ã•ã§èµ¤ã¡ã‚ƒã‚“ã‚’èµ·ã“ã—ã¦ã—ã¾ã†äº‹ãŒã‚ã‚Šã¾ã›ã‚“ğŸ™</p>",
      target: "#light_sw",
      order: 6,
    }
  ,{
    title: "ãƒ‘ãƒ‘ãƒãƒé€£æºã°ã£ã¡ã‚Šã§ã™",
    content: "è¨˜éŒ²ã¯ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå†…ã§åŒæœŸã—ã¾ã™ã€‚ãƒ‘ãƒ‘ãƒ»ãƒãƒãŒåŒä¸€ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚Œã°ã©ã“ã‹ã‚‰ã§ã‚‚è¨˜éŒ²ãƒ»ç¢ºèªãŒå¯èƒ½ã§ã™ğŸ ",
    target: "#data-for-ajax",
    order: 7,
    },
    {
    title: "ã‚¹ãƒ”ãƒ¼ãƒ‰é‡è¦–ã§ã™",
    content: '<p>ç´ æ—©ãå…¥åŠ›ã‚’è¡Œã†ãŸã‚ã«ã€åˆæœŸå€¤ã‚’ã‚«ã‚¹ã‚¿ãƒ å¯èƒ½ã€‚</p><%= image_tag 'setting_ss.png', class: 'img-max' %>',
    target: "#setting_bt",
    order: 8,
    }
    ,
    {
    title: "ä¸€è¦§è¡¨ã®æ“ä½œã¯ã“ã¡ã‚‰",
    content: 'é€±ãƒ»3æ—¥ãƒ»1æ—¥ã¨ãŠå¥½ã¿ã«åˆã‚ã›ã¦è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆå¯èƒ½ã€‚',
    target: "#view_btn",
    order: 9,
    },
    {
    title: "é€£çµ¡å¸³ã‚‰ãã‚‰ã",
    content: '<%= image_tag 'nursery_support_ss.png', class: 'img-max' %><p>ä¿è‚²åœ’ã®é€£çµ¡å¸³ã¸è¨˜å…¥ã™ã‚‹å†…å®¹ã‚’é›†è¨ˆã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚</p>',
    target: "#nursery_support_btn",
    order: 10,
    },
    {
    title: "ä½“æ¸©ã®è¦‹ãˆã‚‹åŒ–",
    content: '<%= image_tag 'body_tmp_ss.png', class: 'img-max' %><p>ä½“æ¸©ã®è¨˜éŒ²ã¯ã‚°ãƒ©ãƒ•ã§è¡¨ç¤ºãŒä¾¿åˆ©ã€‚</p>',
    target: "#chart_btn",
    order: 11,
    },
    {
    title: "ã”æ„è¦‹ãã ã•ã„",
    content: "æ”¹å–„ç‚¹ã€ãƒã‚°ãªã©ãŒã‚ã‚Œã°å ±å‘Šé ‚ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ğŸ™",
    target: "#data-for-ajax",
    order: 12,
    }
]
  <% if @demo_user && @path == "demo" %>
    steps[0] = first_step
  <% end %>
  const tg = new tourguide.TourGuideClient({steps: steps})
  <% if @demo_user && @path == "demo" %>
    tg.start()
  <% end %>
  function tg_start() {
    tg.start()
  }
</script>
